{
  "info": {
    "name": "Mechanic Shop API - Advanced Features",
    "description": "Complete API testing collection including Rate Limiting, Token Authentication, Caching, Pagination, and Inventory management",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Customers",
      "item": [
        {
          "name": "Create Customer (Rate Limited)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test Customer\",\n    \"email\": \"test@example.com\",\n    \"phone\": \"555-1234\",\n    \"address\": \"123 Test St, City, ST 12345\",\n    \"password\": \"testpassword123\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/customers/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", ""]
            },
            "description": "Create a new customer. Rate limited to 5 per minute. Password is automatically hashed."
          }
        },
        {
          "name": "Customer Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"auth_token\", jsonData.token);",
                  "    pm.environment.set(\"customer_id\", jsonData.customer_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"john@example.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/customers/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", "login"]
            },
            "description": "Login with customer credentials. Returns JWT token. Token is automatically saved to environment variables."
          }
        },
        {
          "name": "Get My Tickets (Auth Required)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "description": "JWT Token from login"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/customers/my-tickets",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", "my-tickets"]
            },
            "description": "Get all service tickets for the authenticated customer. Requires valid JWT token."
          }
        },
        {
          "name": "Get All Customers (Paginated & Cached)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/customers/?page=1&per_page=10",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", ""],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            },
            "description": "Get all customers with pagination. Cached for 60 seconds. Includes pagination metadata."
          }
        },
        {
          "name": "Get Customer by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/customers/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", "1"]
            },
            "description": "Get a specific customer by ID"
          }
        },
        {
          "name": "Update Customer (Auth Required)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "description": "JWT Token from login"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"John Doe Updated\",\n    \"phone\": \"555-9999\"\n}"
            },
            "url": {
              "raw": "http://localhost:5000/customers/{{customer_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", "{{customer_id}}"]
            },
            "description": "Update customer information. Customer can only update their own account. Requires authentication."
          }
        },
        {
          "name": "Delete Customer (Auth Required)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "description": "JWT Token from login"
              }
            ],
            "url": {
              "raw": "http://localhost:5000/customers/{{customer_id}}",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["customers", "{{customer_id}}"]
            },
            "description": "Delete customer account. Customer can only delete their own account. Requires authentication."
          }
        }
      ],
      "description": "Customer endpoints with authentication, rate limiting, caching, and pagination"
    },
    {
      "name": "Mechanics",
      "item": [
        {
          "name": "Create Mechanic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"New Mechanic\",\n    \"email\": \"newmech@mechanicshop.com\",\n    \"phone\": \"555-0300\",\n    \"address\": \"200 Garage Ave, City, ST 12345\",\n    \"salary\": 70000.00\n}"
            },
            "url": {
              "raw": "http://localhost:5000/mechanics/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", ""]
            },
            "description": "Create a new mechanic"
          }
        },
        {
          "name": "Get All Mechanics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/mechanics/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", ""]
            },
            "description": "Get all mechanics"
          }
        },
        {
          "name": "Get Mechanics by Tickets (Advanced Query)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/mechanics/by-tickets",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", "by-tickets"]
            },
            "description": "Get mechanics ordered by number of tickets worked on (descending). Includes ticket_count field."
          }
        },
        {
          "name": "Get Mechanic by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/mechanics/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", "1"]
            },
            "description": "Get a specific mechanic by ID"
          }
        },
        {
          "name": "Update Mechanic",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"salary\": 75000.00\n}"
            },
            "url": {
              "raw": "http://localhost:5000/mechanics/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", "1"]
            },
            "description": "Update mechanic information"
          }
        },
        {
          "name": "Delete Mechanic",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/mechanics/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["mechanics", "1"]
            },
            "description": "Delete a mechanic"
          }
        }
      ],
      "description": "Mechanic endpoints including advanced query for ranking by tickets"
    },
    {
      "name": "Service Tickets",
      "item": [
        {
          "name": "Create Service Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"VIN\": \"1ABCD1234EFGH5678\",\n    \"description\": \"New service ticket\",\n    \"service_date\": \"2026-02-15\",\n    \"customer_id\": 1\n}"
            },
            "url": {
              "raw": "http://localhost:5000/service-tickets/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", ""]
            },
            "description": "Create a new service ticket"
          }
        },
        {
          "name": "Get All Service Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", ""]
            },
            "description": "Get all service tickets"
          }
        },
        {
          "name": "Get Service Ticket by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1"]
            },
            "description": "Get a specific service ticket by ID"
          }
        },
        {
          "name": "Edit Ticket Mechanics (Advanced Query)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"add_ids\": [2, 3],\n    \"remove_ids\": [1]\n}"
            },
            "url": {
              "raw": "http://localhost:5000/service-tickets/1/edit",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1", "edit"]
            },
            "description": "Add and/or remove mechanics from a ticket in one request. Use add_ids and remove_ids arrays."
          }
        },
        {
          "name": "Assign Mechanic to Ticket",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/1/assign-mechanic/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1", "assign-mechanic", "1"]
            },
            "description": "Assign a mechanic to a service ticket"
          }
        },
        {
          "name": "Remove Mechanic from Ticket",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/1/remove-mechanic/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1", "remove-mechanic", "1"]
            },
            "description": "Remove a mechanic from a service ticket"
          }
        },
        {
          "name": "Add Part to Ticket",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/1/add-part/5",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1", "add-part", "5"]
            },
            "description": "Add an inventory part to a service ticket. Creates relationship between ticket and inventory."
          }
        },
        {
          "name": "Delete Service Ticket",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/service-tickets/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["service-tickets", "1"]
            },
            "description": "Delete a service ticket"
          }
        }
      ],
      "description": "Service ticket endpoints with advanced queries for mechanic management and inventory"
    },
    {
      "name": "Inventory (NEW)",
      "item": [
        {
          "name": "Create Inventory Part",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"New Part\",\n    \"price\": 49.99\n}"
            },
            "url": {
              "raw": "http://localhost:5000/inventory/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["inventory", ""]
            },
            "description": "Create a new inventory part"
          }
        },
        {
          "name": "Get All Inventory Parts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/inventory/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["inventory", ""]
            },
            "description": "Get all inventory parts"
          }
        },
        {
          "name": "Get Inventory Part by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/inventory/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["inventory", "1"]
            },
            "description": "Get a specific inventory part by ID"
          }
        },
        {
          "name": "Update Inventory Part",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Updated Part Name\",\n    \"price\": 59.99\n}"
            },
            "url": {
              "raw": "http://localhost:5000/inventory/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["inventory", "1"]
            },
            "description": "Update an inventory part"
          }
        },
        {
          "name": "Delete Inventory Part",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/inventory/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "5000",
              "path": ["inventory", "1"]
            },
            "description": "Delete an inventory part"
          }
        }
      ],
      "description": "NEW: Inventory management with full CRUD operations"
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "customer_id",
      "value": "",
      "type": "string"
    }
  ]
}
